- provide :shop_page_title, _('Checkout')
= render partial: 'shop/shared/header'

.row
  .col-lg-9.mb-3
    .card.mb-3
      .card-header
        = _('Checkout|Your items')
      = turbo_frame_tag 'promotion_codes_table' do
        = render partial: 'order_items', locals: { op: op }

    - if current_user.user_addresses.any?
      = turbo_frame_tag 'address' do
        = render partial: 'address_form', locals: { chosen_address: nil }
    - else
      .card
        .card-body
          .alert.alert-warning
            = _('Checkout|Please add an address to your user profile')
            = link_to _('Checkout|Click here to add an address'), settings_user_addresses_path, class: 'alert-link'
    = turbo_frame_tag 'terms_and_conditions'

  .col-lg-3
    .card.mb-3
      .card-header
        = _('Checkout|Promotion codes')
      .card-body
        .d-grid
          = turbo_frame_tag 'promotion_codes_errors'
          = turbo_frame_tag 'promotion_codes_form' do
            = render partial: 'promotion_codes_form'
    = turbo_frame_tag 'chosen_address'
    = turbo_frame_tag 'payment_gateways'
