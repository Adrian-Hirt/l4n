- provide :page_title, _('Seatmap')

.row{data: { controller: 'seatmap' }}
  .col-xl-8.mb-3.mb-xl-0{data: { 'seatmap-target' => 'mainColumn'}}
    .card
      .card-header.d-flex.align-items-center.py-1.justify-content-between
        = _('Seatmap')
        .d-none.d-xl-block
          = button _('Seatmap|Toggle sidebar'), nil, btn_icon: %i[fas fa-bars],
                                                     color: :secondary,
                                                     html: { data: { 'seatmap-target' => 'sidebarToggle' } },
                                                     size: :sm
      .d-flex.justify-content-center
        #seatmap-container.frontend-seatmap{data: { 'seatmap-target' => 'container', seatmap_data: op.seat_map_data }}

  .col-xl-4{data: { 'seatmap-target' => 'sidebar' }}
    - if user_signed_in?
      = turbo_frame_tag :user_ticket do
        = render partial: 'lan/seatmap/user_ticket'

      .card.mb-3
        .card-header
          = _('Seatmap|Your available tickets')
        .card-body
          = turbo_frame_tag :tickets do
            = render partial: 'tickets', locals: { tickets: op.available_tickets }
        .card-footer
          = button _('Tickets|Manage & upgrade tickets'), manage_lan_tickets_path, size: :sm
    .card.mb-3
      .card-header
        = _('Seatmap|Selected seat')
      .card-body
        #current-selected-seat{data: { 'seatmap-target' => 'currentSelectedSeatInfo' }}
          = _('Seatmap|Please select a seat')
    .card
      .card-header
        = _('Seatmap|Seat categories')
      .card-body
        - op.lan_party.seat_categories.each do |category|
          .d-flex.align-items-center.mb-2
            .me-2.badge.seat-id-badge{style: "background-color: #{category.color_for_view};"}
              &nbsp;
            = category.name
        .d-flex.align-items-center
          .me-2.badge.seat-id-badge{style: "background-color: red"}
            &nbsp;
          = _('Seatmap|Taken seat')