%div{data: { controller: 'seatmap-mutations' }}
  - if op.respond_to?(:removed_seat_id)
    #removedSeat{data: { id: op.removed_seat_id }}

  - if op.respond_to?(:taken_seat)
    #takenSeat{data: { id: op.taken_seat.id }}

  - if op.respond_to?(:assigned_seat)
    #assignedSeat{data: { id: op.assigned_seat&.id, username: op.assigned_user.username, userid: op.assigned_user.id }}

  - if op.respond_to?(:unassigned_seat)
    #unassignedSeat{data: { id: op.unassigned_seat&.id }}


%div{data: { 'seatmap-target' => 'tickets' }}
  - if op.available_tickets.none?
    = _('Seatmap|You don\'t have any tickets for this event')
  - op.available_tickets.order(:id).each do |ticket|
    .d-flex.align-items-center.ticket-container.mb-2{data: { seat_category_id: ticket.seat_category_id, ticket_id: ticket.id }}
      .me-2
        .badge.seat-id-badge{style: "background-color: #{ticket.seat_category.color_for_view};", data: { seat_id: ticket.seat&.id }}
          = ticket.seat&.name_or_id.presence || '&nbsp;'.html_safe
      - if ticket.checked_in?
        .me-2
          = ticket.assignee.username
        .badge.bg-secondary
          = _('SeatMap|User checked in')
      - else
        = render partial: 'lan/seatmap/ticket_assignee_actions', locals: { ticket: ticket }
        .ms-2= render partial: 'lan/seatmap/ticket_seat_actions', locals: { ticket: ticket }
